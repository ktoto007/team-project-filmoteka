const t=new class{async fetchMovieByQuery(){const t=await fetch(`https://api.themoviedb.org/3/${this.requestType}/movie?api_key=aa05d9ef1feff0e96ac321d8773a5c67&query=${this.searchQuery}&page=${this.page}`);return await t.json()}async getPopularMovies(){try{const t=await fetch(`https://api.themoviedb.org/3/${this.requestType}/movie/day?api_key=aa05d9ef1feff0e96ac321d8773a5c67&page=${this.page}`),n=await t.json();return n}catch(t){console.log(t)}}async fetchMovieGenres(){try{const t="https://api.themoviedb.org/3/genre/movie/list?api_key=aa05d9ef1feff0e96ac321d8773a5c67",n=await fetch(t);if(!n.ok)throw new Error("error");return await n.json()}catch(t){console.log(t)}}async getMoviesDetails(t){try{const n=await fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=aa05d9ef1feff0e96ac321d8773a5c67&language=${this.lang}`);if(!n.ok)throw new Error("error");return await n.json()}catch(t){console.log(t)}}async getMovieTrailer(t){const n=`https://api.themoviedb.org/3/movie/${t}/videos?api_key=aa05d9ef1feff0e96ac321d8773a5c67`;try{const t=await fetch(n);if(!t.ok)throw new Error("Error");return await t.json()}catch(t){console.error("Error:",t)}}get query(){return this.searchQuery}set query(t){this.searchQuery=t}get pages(){return this.page}set pages(t){this.page=t}get type(){return this.requestType}set type(t){this.requestType=t}constructor(){this.searchQuery="",this.page=1,this.requestType="trending"}};function n(t){return t.map((({title:t,poster_path:n,release_date:e,genre_ids:o,id:a})=>{const i=o.map((t=>localStorage.getItem(t)));i.length>2&&i.splice(2,i.length-2,"Other");return`\n          <li class="films-list__item">\n                <a id=${a}>\n                  <img class="films-list-item__poster" src="https://image.tmdb.org/t/p/w500${n}" alt="${t}" loading="lazy"  />\n                  <div class="films-list-item__info">\n                    <h2 class="films-list-item__tittle">${t}</h2>\n                    <p class="films-list-item__ganres">\n                      <span class="films-list-item__year">${i.join(", ")} | ${e.slice(0,4)}</span>\n                    </p>\n                  </div>\n                </a>`})).join("")}!async function(){(await t.fetchMovieGenres()).genres.map((t=>{const n=Object.values(t);localStorage.setItem(n[0],n[1])}))}();const e=document.querySelector(".button-back"),o=document.querySelector(".button-forward"),a=document.querySelector(".buttons-pages");let i=null,s=null;function u({page:t,total_pages:n}){if(i=window.screen.width,s=n,i<768){if(t<4){a.innerHTML='<li><button class="button-pagination button-page" type="button" id="page-1">1</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-2">2</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-3">3</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-4">4</button></li>\n    <li><button class="button-pagination button-page" type="button id="page-5">5</button></li>\n';return void document.querySelector(`#page-${t}`).classList.add("current-page")}if(t+2>=n){a.innerHTML=`\n    <li><button class="button-pagination button-page" type="button" id="page-${n-4}">${n-4}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n-3}">${n-3}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n-2}">${n-2}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n-1}">${n-1}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n}">${n}</button></li>\n    `;return void document.querySelector(`#page-${t}`).classList.add("current-page")}if(t>=4)return void(a.innerHTML=`<li><button class="button-pagination button-page" type="button">${t-2}</button></li>\n    <li><button class="button-pagination button-page" type="button">${t-1}</button></li>\n    <li><button class="button-pagination button-page current-page" type="button">${t}</button></li>\n    <li><button class="button-pagination button-page" type="button">${t+1}</button></li>\n    <li><button class="button-pagination button-page" type="button">${t+2}</button></li>\n    `)}if(t<5){a.innerHTML=`<li><button class="button-pagination button-page" type="button" id="page-1">1</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-2">2</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-3">3</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-4">4</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-5">5</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-6">6</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-7">7</button></li>\n    <li><button class="button-pagination button-page" type="button">...</button></li>\n    <li><button class="button-pagination button-page" type="button">${n}</button></li>\n`;document.querySelector(`#page-${t}`).classList.add("current-page")}else if(t+5>=n){a.innerHTML=`<li><button class="button-pagination button-page" type="button">1</button></li>\n    <li><button class="button-pagination button-page" type="button">...</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n-6}">${n-6}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n-5}">${n-5}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n-4}">${n-4}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n-3}">${n-3}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n-2}">${n-2}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n-1}">${n-1}</button></li>\n    <li><button class="button-pagination button-page" type="button" id="page-${n}">${n}</button></li>\n    `;document.querySelector(`#page-${t}`).classList.add("current-page")}else t>=5&&(a.innerHTML=`\n        <li><button class="button-pagination button-page" type="button">1</button></li>\n        <li><button class="button-pagination button-page" type="button">...</button></li>\n        <li><button class="button-pagination button-page" type="button">${t-2}</button></li>\n        <li><button class="button-pagination button-page" type="button">${t-1}</button></li>\n        <li><button class="button-pagination button-page current-page" type="button">${t}</button></li>\n        <li><button class="button-pagination button-page" type="button">${t+1}</button></li>\n        <li><button class="button-pagination button-page" type="button">${t+2}</button></li>\n        <li><button class="button-pagination button-page" type="button">...</button></li>\n        <li><button class="button-pagination button-page" type="button">${n}</button></li>\n    `)}a.addEventListener("click",(function(e){if("button"!==e.target.type)return;if("trending"===t.requestType){const o=e.target.textContent;return t.page=Number(o),void t.getPopularMovies().then((t=>{u(t),l.cardContainer.innerHTML=n(t.results)})).catch((t=>t.messsge))}if("search"===t.requestType){const o=e.target.textContent;t.page=Number(o),t.fetchMovieByQuery().then((t=>{u(t),l.cardContainer.innerHTML=n(t.results)})).catch((t=>t.messsge))}})),e.addEventListener("click",(function(){if("trending"===t.requestType)return void(1!==t.page&&(t.page-=1,t.getPopularMovies().then((t=>{u(t),l.cardContainer.innerHTML=n(t.results)})).catch((t=>t.message))));"search"===t.requestType&&1!==t.page&&(t.page-=1,t.fetchMovieByQuery().then((t=>{u(t),l.cardContainer.innerHTML=n(t.results)})).catch((t=>t.message)))})),o.addEventListener("click",(function(){"trending"===t.requestType&&t.page!==s&&(t.page+=1,t.getPopularMovies().then((t=>{u(t),l.cardContainer.innerHTML=n(t.results)})).catch((t=>t.message)));"search"===t.requestType&&t.page!==s&&(t.page+=1,t.fetchMovieByQuery().then((t=>{u(t),l.cardContainer.innerHTML=n(t.results)})).catch((t=>t.message)))}));const l={homeHeaderForm:document.querySelector(".header__form"),cardContainer:document.querySelector(".cards-container")},r=new class{show(){document.body.appendChild(this.loaderElement)}hide(){this.loaderElement.remove()}constructor(){this.loaderElement=document.createElement("div"),this.loaderElement.className="loader"}};document.addEventListener("DOMContentLoaded",(async function(){r.show();const e=await t.getPopularMovies();return r.hide(),t.requestType="trending",u(e),l.cardContainer.innerHTML=n(e.results)})),document.addEventListener("submit",(async function(e){e.preventDefault(),t.query=l.homeHeaderForm.query.value,t.requestType="search",console.log(t.requestType),r.show();const o=await t.fetchMovieByQuery();return r.hide(),u(o),l.cardContainer.innerHTML=n(o.results)}));function p(){modal.remove(),backdrop.remove(),document.removeEventListener("keydown",closeOnEsc)}document.querySelector("#modalBtn").addEventListener("click",(async function(){const t=await async function(t){const n=await fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=aa05d9ef1feff0e96ac321d8773a5c67`);return await n.json()}(255);!function(t){modal=document.createElement("div"),modal.classList.add("modal");const n=`\n      <div class="modal_content">\n      <div class="close">\n      <svg width="16" height="16" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">\n  <path d="M8 8L22 22" stroke="black" stroke-width="2"/>\n  <path d="M8 22L22 8" stroke="black" stroke-width="2"/>\n  </svg>\n    </div>\n        <img src="https://image.tmdb.org/t/p/w500/${t.poster_path}" class="modal_img">\n        <div class="tablet_modal">\n        <h2 class="main_text_modal">${t.title}</h2>\n        <div class="modal_items_container">\n          <ul class="modal_list">\n            <li>Vote / Votes</li>\n            <li>Popularity</li>\n            <li>Original Title</li>\n            <li>Genre</li>\n          </ul>\n          <ul class="modal_list_value">\n            <li>\n              <span class="vote_span">${t.vote_average.toFixed(1)}</span>\n              <span class="delimiter"> / </span>\n              <span class="vote_count_span">${t.vote_count}</span>\n            </li>\n            <li>${t.popularity.toFixed(1)}</li>\n            <li>${t.title}</li>\n            <li>${t.genres[0].name}</li>\n          </ul>\n        </div>\n        <p class="about_modal_text">About</p>\n        <p class="overview_modal">${t.overview}</p>\n        <div class="buttons">\n          <button class="button-watched">Add to Watched</button>\n          <button class="button-queue">Add to Queue</button>\n        </div>\n      </div>\n      </div>\n    `;modal.innerHTML+=n,document.body.appendChild(modal),modal.querySelector(".close").addEventListener("click",(()=>{p(),backdrop.remove()})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&(p(),backdrop.remove())}))}(t),function(){backdrop=document.createElement("div"),backdrop.classList.add("modal-backdrop"),document.body.appendChild(backdrop);const t=()=>{backdrop.remove(),p()};backdrop.addEventListener("click",t);const n=n=>{"Escape"===n.key&&(t(),backdrop.remove())};document.addEventListener("keydown",n)}()}));
//# sourceMappingURL=index.db85d6bc.js.map
